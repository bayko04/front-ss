<template>
  <div class="bg-white dark:bg-slate-800 shadow-lg rounded-sm border border-slate-200 dark:border-slate-700 relative">
    <header class="px-5 py-4">
      <h2 class="font-semibold text-slate-800 dark:text-slate-100">–í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ <span class="text-slate-400 dark:text-slate-500 font-medium">442</span></h2>
    </header>
    <div>

      <!-- Table -->
      <div class="overflow-x-auto">
        <table class="table-auto w-full dark:text-slate-300 divide-y divide-slate-200 dark:divide-slate-700">
          <!-- Table header -->
          <thead class="text-xs uppercase text-slate-500 dark:text-slate-400 bg-slate-50 dark:bg-slate-900/20 border-t border-slate-200 dark:border-slate-700">
            <tr>
              <th class="px-2 first:pl-5 last:pr-5 py-3 whitespace-nowrap">
                <div class="font-semibold text-left">‚Ññ –æ–ø–µ—Ä–∞—Ü–∏–∏</div>
              </th>
              <th class="px-2 first:pl-5 last:pr-5 py-3 whitespace-nowrap">
                <div class="font-semibold text-left">–î–∞—Ç–∞</div>
              </th>
              <th class="px-2 first:pl-5 last:pr-5 py-3 whitespace-nowrap">
                <div class="font-semibold text-left">–ü—Ä–∏–Ω—è—Ç–æ –æ—Ç</div>
              </th>
                <th class="px-2 first:pl-5 last:pr-5 py-3 whitespace-nowrap">
                    <div class="font-semibold text-left">–û—Å–Ω–æ–≤–∞–Ω–∏–µ</div>
                </th>
              <th class="px-2 first:pl-5 last:pr-5 py-3 whitespace-nowrap">
                <div class="font-semibold text-left">–°—É–º–º–∞</div>
              </th>
              <th class="px-2 first:pl-5 last:pr-5 py-3 whitespace-nowrap">
                <div class="font-semibold text-left">–°—Ç–∞—Ç—É—Å</div>
              </th>
              <th class="px-2 first:pl-5 last:pr-5 py-3 whitespace-nowrap">
                <div class="font-semibold text-left">–ì—Ä–∞–∂–¥–∞–Ω—Å—Ç–≤–æ</div>
              </th>
              <th class="px-2 first:pl-5 last:pr-5 py-3 whitespace-nowrap">
                <div class="font-semibold text-left">–¢–∏–ø –æ–ø–µ—Ä–∞—Ü–∏–∏</div>
              </th>
            </tr>
          </thead>
          <!-- Table body -->
          <Order
            v-for="order in orders"
            :key="order.id"
            :order="order"
            v-model:selected="selected"
            :value="order.id"
          />
        </table>

      </div>
    </div>
  </div>
</template>

<script>
import { ref, watch } from 'vue'
import Order from './OrdersTableItem.vue'

import Image01 from '../../images/icon-01.svg?url'
import Image02 from '../../images/icon-02.svg?url'
import Image03 from '../../images/icon-03.svg?url'

export default {
  name: 'OrdersTable',
  components: {
    Order,
  },  
  props: ['selectedItems'],
  setup(props, { emit }) {

    const selectAll = ref(false)
    const selected = ref([])

    const checkAll = () => {
      selected.value = []
      if (!selectAll.value) {
        selected.value = orders.value.map(order => order.id)
      }
    }
    
    watch(selected, () => {
      selectAll.value = orders.value.length === selected.value.length ? true : false
      emit('change-selection', selected.value)
    })    
    
    const orders = ref([
      {
        id: '0',
        image: Image01,
        order: '#123567',
        date: '23/01/2024',
        customer: '–ê–π–¥–∞–Ω –ê–±–¥—ã–ª–¥–∞–µ–≤',
        total: '73000',
        status: '–í—ã–ø–æ–ª–Ω–µ–Ω–æ',
        items: '1',
        location: 'üá∞üá¨ Kyrgyzstan, (KGZ)',
        type: '–ü—Ä–∏—Ö–æ–¥',
        description: '–ü–æ–≥–∞—à–µ–Ω–∏–µ –∑–∞–ª–æ–≥–∞'
      },
      {
        id: '1',
        image: Image01,
        order: '#779912',
        date: '20/01/2024',
        customer: '–ú—ç—ç—Ä–∏–º –ñ—É–º–∞–≥—É–ª–æ–≤–∞',
        total: '28500',
        status: '–í—ã–ø–æ–ª–Ω–µ–Ω–æ',
        items: '2',
        location: 'üá∞üá¨ Kyrgyzstan, (KG)',
        type: '–ü—Ä–∏—Ö–æ–¥',
        description: '–ß–∞—Å—Ç–∏—á–Ω–æ–µ –ø–æ–≥–∞—à–µ–Ω–∏–µ %. –ó–∞–ª–æ–≥ –∑–æ–ª–æ—Ç–æ 34–≥—Ä 585'
      },
      {
        id: '2',
        image: Image02,
        order: '#889924',
        date: '20/01/2024',
        customer: '–ê–ª–∏—à–µ—Ä –•—É—Å–µ–Ω–æ–≤',
        total: '34000',
        status: '–í—ã–ø–æ–ª–Ω–µ–Ω–æ',
        items: '2',
        location: 'üáπüáØ Tajikistan (TJ)',
        type: '–ü—Ä–∏—Ö–æ–¥',
        description: '–û–ø–ª–∞—Ç–∞ % –∏ —à—Ç—Ä–∞—Ñ–æ–≤'
      },
      {
        id: '3',
        image: Image01,
        order: '#897726',
        date: '19/01/2024',
        customer: '–®–µ—Ä–∑–æ–¥ –Æ–ª–¥–∞—à–µ–≤',
        total: '7300',
        status: '–í –ø—Ä–æ—Ü–µ—Å—Å–µ',
        items: '1',
        location: 'üá∫üáø Uzbekistan (UZ)',
        type: '–ü—Ä–∏—Ö–æ–¥',
        description: '–ü–æ–≥–∞—à–µ–Ω–∏–µ %. –ó–∞–ª–æ–≥ –ú–æ–Ω–∏—Ç–æ—Ä LCD 32'
      },
      {
        id: '4',
        image: Image03,
        order: '#123567',
        date: '19/01/2024',
        customer: '–ë–∞–∫—ã—Ç –°–∞–≥—ã–Ω–±–∞–µ–≤',
        total: '18000',
        status: '–í–æ–∑–≤—Ä–∞—Ç',
        items: '1',
        location: 'üá∞üá¨ Kyrgyzstan, (KG)',
        type: '–ü—Ä–∏—Ö–æ–¥',
        description: '–í–æ–∑–≤—Ä–∞—Ç –∑–∞–ª–æ–≥–∞. –†–µ—à–∏–ª –æ—Ç–∫–∞–∑–∞—Ç—å—Å—è –æ—Ç –∑–∞–ª–æ–≥–∞, –æ—Ç–º–µ–Ω–∏–ª–∏ –æ–ø–µ—Ä–∞—Ü–∏—é'
      },
      {
        id: '5',
        image: Image01,
        order: '#896644',
        date: '18/01/2024',
        customer: '–ê–π–¥–∞—Ä –¢–æ–∫—Ç–æ–±–µ–∫–æ–≤',
        total: '27900',
        status: '–í—ã–ø–æ–ª–Ω–µ–Ω–æ',
        items: '1',
        location: 'üá∞üá¨ Kyrgyzstan, (KG)',
        type: '–†–∞—Å—Ö–æ–¥',
        description: '–í—ã–¥–∞—á–∞ –¥–µ–Ω–µ–∂–Ω—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤ –ø–æ–¥ –∑–∞–ª–æ–≥ –ü—Ä–∏–Ω—Ç–µ—Ä —Å—Ç—Ä—É–π–Ω—ã–π Epson L1800'
      },
      {
        id: '6',
        image: Image03,
        order: '#136988',
        date: '17/01/2024',
        customer: '–ê–ª–µ–∫—Å–∞–Ω–¥—Ä –°—É—Ö–æ–≤',
        total: '32000',
        status: '–í—ã–ø–æ–ª–Ω–µ–Ω–æ',
        items: '1',
        location: 'üá∑üá∫ Russia (RU)',
        type: '–†–∞—Å—Ö–æ–¥',
        description: '–í—ã–¥–∞—á–∞ –ø–æ–¥ –∑–∞–ª–æ–≥'
      },
      {
        id: '7',
        image: Image03,
        order: '#442206',
        date: '16/01/2024',
        customer: '–≠—Ä–Ω–∞–∑–∞—Ä –ê–¥–±—Ä–∞—Ö–º–∞–Ω–æ–≤',
        total: '11000',
        status: '–í—ã–ø–æ–ª–Ω–µ–Ω–æ',
        items: '2',
        location: 'üá∞üá¨ Kyrgyzstan, (KG)',
        type: '–ü—Ä–∏—Ö–æ–¥',
        description: '–ü–æ–≥–∞—à–µ–Ω–∏–µ %'
      },
      {
        id: '8',
        image: Image02,
        order: '#764321',
        date: '15/01/2024',
        customer: '–ì—É–ª—å–∂–∞–º–∞–ª –ê—Å—ã–ª–±–µ–∫–æ–≤–∞',
        total: '8000',
        status: '–í –ø—Ä–æ—Ü–µ—Å—Å–µ',
        items: '2',
        location: 'üá∞üá¨ Kyrgyzstan, (KG)',
        type: '–†–∞—Å—Ö–æ–¥',
        description: '–í—ã–¥–∞—á–∞ –ø–æ–¥ –∑–∞–ª–æ–≥'
      },
      {
        id: '9',
        image: Image01,
        order: '#908764',
        date: '15/01/2024',
        customer: '–ù—É—Ä—Å—É–ª—Ç–∞–Ω –°–∞—Ä—ã–±–∞–µ–≤',
        total: '3500',
        status: '–í—ã–ø–æ–ª–Ω–µ–Ω–æ',
        items: '1',
        location: 'üá∞üá¨ Kyrgyzstan, (KG)',
        type: '–ü—Ä–∏—Ö–æ–¥',
        description: '–û–ø–ª–∞—Ç–∏–ª %'
      }
    ])

    return {
      selectAll,
      selected,
      checkAll,
      orders,
    }
  }
}
</script>